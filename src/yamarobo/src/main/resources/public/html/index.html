<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <title>Robot Socket</title>
</head>
<body>
  <script type="text/javascript">
    var uri = "ws://" + location.host;
    var webSocket = null;

	function connect() {
	  if (webSocket == null) {
	    webSocket = new WebSocket(uri);
	    webSocket.onopen    = onOpen;
	    webSocket.onmessage = onMessage;
	    webSocket.onclose   = onClose;
	    webSocket.onerror   = onError;
	  }
	}    
	
	function onOpen(event) {
		console.dirxml(event);
		console.log('connected!');
	}

	function onMessage(event) { 
		if (!event || !event.data) return;
		console.dirxml(event);
		console.log(event.data); 
	}

	function onClose(event) {
		console.dirxml(event);
		console.log('disconnected!');
	}

	function onError(event) {
		console.dirxml(event);
		console.log('error!');
	}
  </script>
  <h1>Robot Socket</h1>
  <a href="#" onclick="connect();">接続する</a>
  <a href="#" onclick="sendMessage();">hello!</a>
</body>
</html>
